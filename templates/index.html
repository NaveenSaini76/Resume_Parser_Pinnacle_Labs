<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resume Parser AI</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar-custom">
  <div class="container d-flex align-items-center justify-content-between">
    <a class="brand" href="/"><i class="bi bi-cpu-fill"></i> Resume Parser AI</a>
    <a href="/history" class="nav-link-custom"><i class="bi bi-clock-history me-1"></i>History</a>
  </div>
</nav>

<!-- HERO -->
<section class="hero fade-up">
  <div class="container">
    <div class="hero-badge"><i class="bi bi-stars"></i> AI-Powered NLP Engine</div>
    <h1>Resume Parser AI</h1>
    <p>Upload a resume in PDF or DOCX and instantly extract structured data &mdash; name, email, phone, LinkedIn, GitHub, skills, education, experience &amp; projects.</p>
  </div>
</section>

<!-- FLASH MESSAGES -->
<div class="container mb-3">
  {% with messages = get_flashed_messages(with_categories=true) %}{% if messages %}
    {% for category, message in messages %}
      <div class="alert-custom {{ 'error' if category=='error' else 'success' }} fade-up">
        <i class="bi bi-{{ 'exclamation-triangle-fill' if category=='error' else 'check-circle-fill' }}"></i>
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}{% endwith %}
</div>

<!-- UPLOAD CARD -->
<div class="container mb-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="glass-card fade-up fade-up-d1">
        <div class="glass-card-header"><i class="bi bi-cloud-arrow-up-fill"></i> Upload Resume</div>
        <div class="glass-card-body">
          <form method="POST" action="/upload" enctype="multipart/form-data" id="uploadForm">

            <!-- Drop zone -->
            <div class="drop-zone mb-3" id="dropZone" onclick="document.getElementById('fileInput').click()">
              <div class="icon"><i class="bi bi-file-earmark-arrow-up-fill"></i></div>
              <div class="title">Drag &amp; drop your resume here</div>
              <div class="sub">or click to browse files</div>
              <div class="format-tags">
                <span class="format-tag">PDF</span>
                <span class="format-tag">DOCX</span>
                <span class="format-tag">DOC</span>
              </div>
              <input type="file" id="fileInput" name="resume" accept=".pdf,.docx,.doc" class="d-none" required />
            </div>

            <div id="fileInfo" class="file-info d-none mb-3">
              <i class="bi bi-paperclip"></i> <span id="fileName"></span>
            </div>

            <!-- Job Description -->
            <div class="mb-4">
              <label for="jd" class="form-label">
                <i class="bi bi-briefcase-fill me-1"></i>
                Job Description <span style="color:var(--text-dim); text-transform:none; font-weight:400; letter-spacing:0;">(optional)</span>
              </label>
              <textarea id="jd" name="job_description" class="form-control" rows="4"
                placeholder="Paste a job description to get a skill-match percentage..."></textarea>
              <div class="form-text">Leave blank to skip skill-match analysis.</div>
            </div>

            <div class="d-grid">
              <button type="submit" class="btn-accent" id="submitBtn">
                <i class="bi bi-cpu-fill me-2"></i>Parse Resume
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- FEATURES -->
<div class="container mb-5 fade-up fade-up-d2">
  <p class="text-center mb-4" style="color:var(--text-dim); font-size:.82rem; text-transform:uppercase; letter-spacing:1px; font-weight:600;">What Gets Extracted</p>
  <div class="row g-3 justify-content-center">
    {% set features = [
      ('person-fill',       'Full Name',      'NLP entity detection'),
      ('envelope-fill',     'Email',          'Regex extraction'),
      ('telephone-fill',    'Phone',          'International formats'),
      ('linkedin',          'LinkedIn',       'Full URL, never truncated'),
      ('github',            'GitHub',         'Profile URL extraction'),
      ('tools',             'Skills',         '120+ skill database'),
      ('mortarboard-fill',  'Education',      'Degrees & universities'),
      ('briefcase-fill',    'Experience',     'Jobs, companies & dates'),
      ('kanban-fill',       'Projects',       'Personal & academic'),
    ] %}
    {% for icon, title, desc in features %}
    <div class="col-6 col-md-3">
      <div class="feature-item">
        <div class="icon"><i class="bi bi-{{ icon }}"></i></div>
        <div class="title">{{ title }}</div>
        <div class="desc">{{ desc }}</div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<footer class="footer-custom">
  Built with Flask &middot; spaCy &middot; Bootstrap 5 &middot; SQLite
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
const input=document.getElementById('fileInput'),
      zone=document.getElementById('dropZone'),
      info=document.getElementById('fileInfo'),
      name_=document.getElementById('fileName'),
      form=document.getElementById('uploadForm'),
      btn=document.getElementById('submitBtn');

function showFile(f){ name_.textContent=f.name; info.classList.remove('d-none'); zone.classList.add('drop-zone--active'); }
input.addEventListener('change',()=>{ if(input.files.length) showFile(input.files[0]); });
zone.addEventListener('dragover',e=>{ e.preventDefault(); zone.classList.add('drop-zone--over'); });
['dragleave','dragend'].forEach(t=>zone.addEventListener(t,()=>zone.classList.remove('drop-zone--over')));
zone.addEventListener('drop',e=>{ e.preventDefault(); zone.classList.remove('drop-zone--over'); if(e.dataTransfer.files.length){ input.files=e.dataTransfer.files; showFile(e.dataTransfer.files[0]); }});
form.addEventListener('submit',()=>{ btn.innerHTML='<span class="spinner-border spinner-border-sm me-2"></span>Parsing...'; btn.disabled=true; });
</script>
</body>
</html>
